webpackJsonp([0],{OQQf:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l={data:function(){return{appSearchTime:[],articles:[],article:{id:"",type:"",newsType:"",newsSourceId:"",newsTransferId:"",paperPublishTime:"",appPublishTime:"",pageName:"",category:"",paperTitle:"",appTitle:"",author:"",editor:"",wordCount:"",url:"",remark:"",scoreId:"",score:"",createUser:"",createTime:"",updateUser:"",updateTime:""},isDisabledEditArticle:!0,banEditScoreId:!1,dialogTitle:"",dialogVisible:!1,paperSearchTime:[],sizes:[100,200,500],searchParams:{type:1,paperStartTime:"",paperEndTime:"",appStartTime:"",appEndTime:"",paperTitle:"",appTitle:"",author:"",isScore:"",scoreId:"",pageNum:1,pageSize:100,orderBy:""},selectIsScore:[{value:"",label:"全部"},{value:-1,label:"未打分"},{value:1,label:"已打分"}],selectScore:[],selectType:[{label:"只发APP",value:1},{label:"先发APP再发纸媒",value:2},{label:"先发纸媒再发APP",value:3},{label:"只发报纸",value:4}],tableLoading:!1,total:1}},methods:{appSearchTimeChange:function(){this.appSearchTime&&this.appSearchTime.length>0?(this.searchParams.appStartTime=this.appSearchTime[0].substring(0,10)+" 00:00:00",this.searchParams.appEndTime=this.appSearchTime[1].substring(0,10)+" 23:59:59"):(this.searchParams.appStartTime="",this.searchParams.appEndTime="")},cancelEdit:function(){this.dialogVisible=!1,this.emptyData(),this.load()},changeType:function(){this.currentTime(),this.searchParams.pageNum=1,this.load()},currentChange:function(e){this.searchParams.pageNum=e,this.load()},currentTime:function(){var e=new Date,a=new Date(e.getTime()-864e5),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())).toISOString().slice(0,10),l=this.searchParams.type;l&&1!==l&&2!==l?(this.appSearchTime=[],this.paperSearchTime=[t,t]):(this.appSearchTime=[t+" 00:00:00",t+" 23:59:59"],this.paperSearchTime=[]),this.appSearchTimeChange(),this.paperSearchTimeChange()},del:function(e){var a=this;this.$confirm("此操作将永久删除["+e.appTitle+"]，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message("功能暂未开放")}).catch(function(){})},emptyData:function(){this.article={id:"",type:"",newsType:"",newsSourceId:"",newsTransferId:"",paperPublishTime:"",appPublishTime:"",pageName:"",category:"",paperTitle:"",appTitle:"",author:"",editor:"",wordCount:"",url:"",remark:"",scoreId:"",score:"",createUser:"",createTime:"",updateUser:"",updateTime:""},this.isDisabledEditArticle=!0,this.banEditScoreId=!1},getScoreData:function(){var e=this;this.getRequest("/article/score").then(function(a){if(a.data&&a.data.data)for(var t=a.data.data,l=0;l<t.length;l++){var i=t[l].id,r=t[l].score;"手动打分"===i&&(r="");var s={label:i+" "+r,value:i};e.selectScore.push(s)}})},load:function(){var e=this,a=this;this.tableLoading=!0,this.getRequest("/article",a.searchParams).then(function(t){e.tableLoading=!1,a.total=t.data.total,a.articles=t.data.data})},paperSearchTimeChange:function(){this.paperSearchTime&&this.paperSearchTime.length>0?(this.searchParams.paperStartTime=this.paperSearchTime[0],this.searchParams.paperEndTime=this.paperSearchTime[1]):(this.searchParams.paperStartTime="",this.searchParams.paperEndTime="")},save:function(e){var a=this;a.tableLoading=!0,this.putRequest("/article",a.article).then(function(e){a.tableLoading=!1,a.dialogVisible=!1,a.emptyData(),a.load()})},search:function(){this.searchParams.pageNum=1,this.load()},sizeChange:function(e){this.searchParams.pageSize=e,this.load()},showAddView:function(){this.dialogTitle="添加",this.dialogVisible=!0,this.isDisabledEditArticle=!1,this.banEditScoreId=!1},showEditView:function(e){var a=this,t=this;this.tableLoading=!0,this.isDisabledEditArticle=!0,this.getRequest("/article/"+e.id).then(function(e){t.article=e.data.data,t.article.scoreId&&""!==t.article.scoreId&&(a.banEditScoreId=!0)}),t.tableLoading=!1,t.dialogTitle="编辑详情",t.dialogVisible=!0},tableSortChange:function(e){"descending"===e.order?this.searchParams.orderBy=e.prop+" DESC":this.searchParams.orderBy=e.prop+" ASC",this.load()}},mounted:function(){this.currentTime(),this.load(),this.getScoreData()}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("h2",[e._v("新媒体绩效考核系统")]),e._v(" "),t("el-container",[t("el-header",[t("div",[e._v("\n        类型：\n        "),t("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.changeType},model:{value:e.searchParams.type,callback:function(a){e.$set(e.searchParams,"type",a)},expression:"searchParams.type"}},e._l(e.selectType,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v("\n        APP发布时间：\n        "),t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":e.searchParams.appStartTime,"end-placeholder":e.searchParams.appEndTime,size:"mini",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.appSearchTimeChange},model:{value:e.appSearchTime,callback:function(a){e.appSearchTime=a},expression:"appSearchTime"}}),e._v("\n        纸媒发布日期：\n        "),t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":e.searchParams.paperStartTime,"end-placeholder":e.searchParams.paperEndTime,size:"mini",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.paperSearchTimeChange},model:{value:e.paperSearchTime,callback:function(a){e.paperSearchTime=a},expression:"paperSearchTime"}}),e._v(" "),t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),t("br"),t("br"),e._v("APP标题：\n        "),t("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search(a)}},model:{value:e.searchParams.appTitle,callback:function(a){e.$set(e.searchParams,"appTitle",a)},expression:"searchParams.appTitle"}}),e._v("\n        纸媒标题：\n        "),t("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search(a)}},model:{value:e.searchParams.paperTitle,callback:function(a){e.$set(e.searchParams,"paperTitle",a)},expression:"searchParams.paperTitle"}}),e._v("\n        作者：\n        "),t("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search(a)}},model:{value:e.searchParams.author,callback:function(a){e.$set(e.searchParams,"author",a)},expression:"searchParams.author"}}),e._v("\n        打分状态：\n        "),t("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.search},model:{value:e.searchParams.isScore,callback:function(a){e.$set(e.searchParams,"isScore",a)},expression:"searchParams.isScore"}},e._l(e.selectIsScore,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),t("el-main",{staticStyle:{"padding-left":"0px","padding-top":"30px"}},[t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.articles,size:"mini",border:"","default-sort":{prop:"appPublishTime",order:"descending"}},on:{"sort-change":e.tableSortChange}},[t("el-table-column",{attrs:{align:"center",type:"index",width:"50",prop:"no",label:"序号"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"150",prop:"paperPublishTime",label:"纸媒发布时间",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"150",prop:"appPublishTime",label:"APP发布时间",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"350",prop:"paperTitle",label:"纸媒标题"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"350",prop:"appTitle",label:"APP标题"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"130",prop:"author",label:"作者",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"130",prop:"editor",label:"编辑",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"100",prop:"wordCount",label:"字数",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"100",prop:"clickCount",label:"浏览量",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"100",prop:"scoreId",label:"等级"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"100",prop:"score",label:"分数",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"500",prop:"remark",label:"备注"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.showEditView(a.row)}}},[e._v("详情")]),e._v(" "),t("el-button",{attrs:{hidden:"hidden",size:"small",type:"danger"},on:{click:function(t){return e.del(a.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{"justify-content":"space-between"}},[t("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"","page-sizes":e.sizes,"page-size":e.searchParams.pageSize,"current-page":e.searchParams.pageNum,layout:"sizes, prev, pager, next, jumper, ->, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),t("el-dialog",{attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,"before-close":e.cancelEdit,width:"80%",center:""},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"saveForm",attrs:{model:e.article}},[t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"类别","label-width":"120px"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.article.type,callback:function(a){e.$set(e.article,"type",a)},expression:"article.type"}},e._l(e.selectType,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:e.isDisabledEditArticle}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"链接","label-width":"120px"}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入链接",readonly:e.isDisabledEditArticle},model:{value:e.article.url,callback:function(a){e.$set(e.article,"url",a)},expression:"article.url"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"纸媒标题","label-width":"120px"}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入纸媒标题",readonly:e.isDisabledEditArticle},model:{value:e.article.paperTitle,callback:function(a){e.$set(e.article,"paperTitle",a)},expression:"article.paperTitle"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"APP标题","label-width":"120px"}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入APP标题",readonly:e.isDisabledEditArticle},model:{value:e.article.appTitle,callback:function(a){e.$set(e.article,"appTitle",a)},expression:"article.appTitle"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"作者","label-width":"120px"}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入作者",readonly:e.isDisabledEditArticle},model:{value:e.article.author,callback:function(a){e.$set(e.article,"author",a)},expression:"article.author"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"编辑","label-width":"120px"}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入编辑",readonly:e.isDisabledEditArticle},model:{value:e.article.editor,callback:function(a){e.$set(e.article,"editor",a)},expression:"article.editor"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"纸媒发布时间","label-width":"120px"}},[t("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"选择日期","value-format":"yyyy-MM-dd",readonly:e.isDisabledEditArticle},model:{value:e.article.paperPublishTime,callback:function(a){e.$set(e.article,"paperPublishTime",a)},expression:"article.paperPublishTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"APP发布时间","label-width":"120px"}},[t("el-date-picker",{attrs:{type:"datetime",size:"mini",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss",readonly:e.isDisabledEditArticle},model:{value:e.article.appPublishTime,callback:function(a){e.$set(e.article,"appPublishTime",a)},expression:"article.appPublishTime"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"字数","label-width":"120px"}},[t("el-input-number",{attrs:{min:0,size:"mini",disabled:e.isDisabledEditArticle},model:{value:e.article.wordCount,callback:function(a){e.$set(e.article,"wordCount",a)},expression:"article.wordCount"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"浏览量","label-width":"120px"}},[t("el-input-number",{attrs:{size:"mini",disabled:e.isDisabledEditArticle},model:{value:e.article.clickCount,callback:function(a){e.$set(e.article,"clickCount",a)},expression:"article.clickCount"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"等级分","label-width":"120px"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:e.banEditScoreId},model:{value:e.article.scoreId,callback:function(a){e.$set(e.article,"scoreId",a)},expression:"article.scoreId"}},e._l(e.selectScore,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注","label-width":"120px"}},[t("el-input",{attrs:{type:"textarea",rows:"5",size:"mini",placeholder:"请输入备注"},model:{value:e.article.remark,callback:function(a){e.$set(e.article,"remark",a)},expression:"article.remark"}})],1)],1),e._v(" "),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:24}},[t("iframe",{attrs:{src:e.article.url,frameborder:"0",width:"100%",height:"500px"}})])],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.save("saveForm")}}},[e._v("确认")]),e._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:e.cancelEdit}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=t("VU/8")(l,i,!1,function(e){t("j9k+")},null,null);a.default=r.exports},"j9k+":function(e,a){}});
//# sourceMappingURL=0.0515552dbcf393b57343.js.map